{{/*
{{- range $partition := .Values.slurm_config.partitions }}
PartitionName={{ $partition.name }}
    {{- if kindIs "string" $partition.nodes }}
        {{- "Nodes=" | indent 4 }}{{- $partition.nodes -}}
    {{- else }}
        {{- "Nodes=" | indent 4 }}{{- include "slurm.compressHosts" $partition -}}
    {{- end }}
    {{- range $key, $value := omit $partition "name" "nodes" }}
        {{- if kindIs "float64"  $value }}
            {{- $key | indent 4 }}={{- int $value }}
        {{- else if kindIs "slice" $value }}
            {{- $key | indent 4 }}={{- join "," $value }}
        {{- else }}
            {{- $key | indent 4 }}={{- $value }}
        {{- end }}
    {{- end }}
{{- end }}
*/}}

{{- if not (contains "stage" .Release.Name) }}
PartitionName=defq Nodes=ALL Default=YES
PartitionName=prod Nodes=storm[00,02,09-12,15-29,36-45,50-73,82-89][01-10] PriorityJobFactor=20 DenyAccounts=shual_team
PartitionName=mon Nodes=storm[00,02,09-12,15-29,36-45,50-73,82-89][01-10] PriorityJobFactor=20 DenyAccounts=application
PartitionName=nightly Nodes=ALL PriorityJobFactor=5 DenyAccounts=shual_team
PartitionName=devel_quick Nodes=ALL QOS=devel PriorityJobFactor=10 DefaultTime=20  MaxTime=30
{{- else }}
PartitionName=partition Nodes=ALL Default=YES
{{- end }}
